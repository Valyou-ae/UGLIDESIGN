Part 1: Complete Feature List
The application, Elite Mockup Generator, is a professional-grade tool designed to create photorealistic mockups with a primary focus on achieving unparalleled consistency across multiple images.
Core Generation Engine
Dual Generation Journeys: The app offers two distinct workflows tailored to different design types:
DTG (Direct-to-Garment): For standard designs placed on a specific area of a product.
AOP (All-Over-Print): For seamless patterns that cover the entire surface of a product.
AI-Powered Seamless Pattern Generation: For the AOP journey, the app can take a standard, non-tileable design and use the Gemini API to intelligently generate a perfectly seamless, tileable pattern.
High-Fidelity Image Generation: Utilizes Google's powerful gemini-3-pro-image-preview model for rendering all final mockups, ensuring the highest possible quality and realism.
Consistency & Precision Engine (The "Lock-In" System)
This is the core of the application, comprising multiple layers of unbreakable rules to ensure every generated image is technically precise and consistent with others in its batch.
"Persona Lock" Visual Anchor: The cornerstone of model consistency. The app first generates a single, hyper-realistic headshot of the selected model. This image is then used as a non-negotiable visual reference in all subsequent mockup prompts to lock in the model's identity.
Design Asset Lock: Treats the user's uploaded design as an immutable digital asset, explicitly forbidding the AI from redrawing or stylistically altering it.
Color Fidelity Lock: The exact name and hex code of the selected garment color are passed as a mandatory directive.
Size, Fit & Print Scale Lock: The prompt specifies the garment's size (e.g., 'M'), commands the AI to render a realistic fit on a model of the same size, and dictates the exact physical print area width (e.g., "14 inches").
Camera Angle & Pose Lock: Employs highly specific, professional-grade framing and posing instructions for each camera angle (e.g., "Medium Shot, cropped from head to below waist," "perfect side profile") to eliminate inconsistencies.
AOP Garment Construction Logic: A product-aware system provides specific construction rules for different AOP products, fixing inconsistencies with trim pieces:
T-Shirts/Hoodies: Specifies that collars and cuffs must be a solid color sampled from the most prominent non-background accent color in the pattern, and that this choice must be consistent across all images in a batch.
Leggings: Specifies that the wide waistband must be a solid, consistent color sampled from the pattern.
AOP Pattern Scale Lock: Replaces ambiguous percentage-based scaling with a non-negotiable physical measurement (e.g., "pattern must repeat exactly every 6 inches"), ensuring uniform pattern size across all angles.
AOP Fabric Physics Separation: A critical directive that separates the 2D visual texture of a pattern (e.g., a "knit" look) from the 3D physical properties of the garment fabric (e.g., polyester), ensuring a t-shirt with a sweater pattern looks like a t-shirt, not a sweater.
User Workflow & UI
Guided Multi-Step Workflow: A clear, step-by-step process with a visual progress bar that guides the user from asset upload to final generation.
Mandatory API Key Selection: Integrates with the aistudio environment to require users to select a paid API key from a Google Cloud project before using the app.
Post-Generation Refinement: After a batch is generated, users can provide a text-based refinement prompt for any individual image to tweak or regenerate it.
Concurrent Generation Queue: Manages all generation jobs in a robust queue that processes multiple images concurrently (up to 3 at a time), with built-in rate limiting (10/min) and automatic retries for failed jobs.
Global Error Boundary: Provides a user-friendly error screen and a reset option in case of an unexpected application crash.
Customization & Creative Control
Extensive Product Catalog: Supports a wide range of DTG and AOP products across categories like Men's/Women's/Kids' Clothing, Accessories, and Home & Living.
Detailed Model Customization: Allows selection of model Age Group, Sex, Ethnicity, and Size, which is used to generate a precise physical profile for the model.
Batch Variant Generation: Users can select multiple garment colors and camera angles in a single session to generate a full suite of mockups.
Custom Environment Prompts: A dedicated step for users to write detailed, descriptive text prompts for the scene, background, and environment of the mockup.
Pre-defined Brand Styles: Offers a selection of curated brand styles (e.g., 'E-Commerce Clean', 'Editorial Fashion') that automatically influence the prompt's aesthetic direction.
Advanced Generation Options: An optional panel that gives expert users direct control over professional Lighting Presets and Material Condition.
Performance & Reliability
"Fast Path" Render Optimization: Intelligently detects when a user selects a clean, commercial brand style without a custom environment prompt. In this case, it simplifies the prompt to resolve "creative conflict" for the AI, significantly reducing render times.
Robust Data System: The core persona generation relies on the somaticProfiles knowledge base, a programmatic system that provides 100% data coverage for every possible combination of model characteristics, eliminating the errors caused by incomplete, hand-written databases.
Part 2: Knowledge Base (KB) Architecture
The application's power and precision come from its extensive Knowledge Base, located in services/knowledge/. This KB codifies deep domain expertise in photography, fashion, physics, and AI prompting into a series of interconnected modules that guide the Gemini API.
somaticProfiles.ts (Primary Persona Engine): This is the "gold standard" for model creation. It is a programmatic matrix that generates a precise, data-driven physical blueprint (height, weight, build, description) for every possible combination of Age, Sex, Ethnicity, and Size. This guarantees 100% data coverage and is the primary source for the "Persona Lock" headshot.
adult/teen/youngAdultPersonas.ts (Narrative Persona Libraries): These files contain hundreds of detailed, hand-written narrative descriptions for specific models. While the somaticProfiles provides the physical blueprint, these files serve as a rich source of narrative detail and a robust fallback system, making the AI's concept of the character "stickier".
productBlueprints.ts (Garment Construction): This module acts as a digital tailor. It provides product-aware construction rules, telling the AI how to build a specific garment. This is where the critical AOP logic (e.g., "leggings have a solid waistband," "t-shirts have a solid collar") is defined.
productAngleDetails.ts (Camera & Posing): This is the application's "Director of Photography." It contains precise, professional-grade instructions for each camera angle, defining the lens, aperture, framing (e.g., "Medium Shot"), and, crucially, the model's required pose (e.g., "perfect side profile").
contourDistortion.ts (Physics Engine): This is the core of the app's realism. It codifies the physics of how a 2D design must distort when wrapped around a 3D human body. It includes rules for cylindrical mapping (how a design compresses as it wraps around the torso) and fold interaction (how a design must bend and stretch with every crease in the fabric).
materialRealism.ts (Fabric & Print Physics): This module defines the physical properties of different fabrics (e.g., the drape of cotton vs. the sheen of polyester) and the visual characteristics of different print methods (DTG vs. Sublimation). It also contains presets for a garment's condition ('Brand New', 'Lived In', 'Vintage Distressed').
lightingSetups.ts (Lighting Gaffer): A professional library of over 20 distinct lighting configurations, from 'Classic Three-Point Studio' to 'Golden Hour Outdoor'. Each preset includes technical details on color temperature, shadow type, and specific prompt phrasing to achieve a professional look.
brandStyles.ts (Art Director): A library of high-level aesthetic presets ('E-Commerce Clean', 'Vintage Retro', etc.). Each style defines a specific combination of photography style, color palette, lighting, and mood.
names.ts & ethnicFeatures.ts (Casting Director): These files provide data to create varied and believable characters. names.ts offers plausible names for each ethnicity and sex, while ethnicFeatures.ts provides pools of realistic hair/eye colors and styles.
negativePrompts.ts (Quality Control): A comprehensive library of terms to exclude from every prompt. This is a critical function that prevents the AI from generating common flaws like blurry images, deformed hands, watermarks, or unwanted artistic styles.
Deprecated/Legacy Files: The codebase also contains several files that have been superseded by more robust modules (digitalTwins.ts, fabricPhysics.ts, cameraSpecs.ts, etc.). This reflects the iterative, step-by-step process we undertook to build the final, successful architecture.
